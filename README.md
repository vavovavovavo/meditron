# Meditron — Telegram-бот для оценки уровня профессионального выгорания

Meditron — это Telegram-бот, предназначенный для проведения анкетирования сотрудников,
анализа уровня стресса и выгорания, предоставления персональных рекомендаций на основе
результатов, а также сохранения данных опроса в базу данных через API.

---

## 📌 Основные возможности

- 📊 **Анкетирование** — бот задаёт 10 вопросов по шкале от 1 до 10.
- 🧠 **Анализ с помощью ИИ (GigaChat)** — бот отправляет результаты в GigaChat и получает рекомендации.
- 💾 **Сохранение результатов** — после прохождения опроса данные отправляются в backend (`/surveys`) и сохраняются в PostgreSQL (`JSONB`).
- 👨‍💼 **Два режима**:
  - **Начальник** — просмотр агрегированных статистических отчётов по отделам.
  - **Работник** — прохождение теста на выгорание и получение персональных советов.
- ⚙️ **Гибкие настройки** — работа через `.env` файл.

---

## 🏗 Архитектурная схема

┌────────────────┐ ┌────────────────────┐ ┌──────────────────┐
│ │ │ │ │ │
│ Telegram Польз │ ---> │ Telegram Bot │ ---> │ Backend API │
│ (Начальник/Раб)│ │ (python-telegram-bot│ │ (Flask/FastAPI) │
│ │ │ логика опроса) │ │ POST /surveys │
└────────────────┘ └────────────────────┘ │ │
└────────┬─────────┘
│
▼
┌──────────────────┐
│ PostgreSQL DB │
│ Таблица surveys │
│ JSONB: {ans, sum}│
└──────────────────┘

**Описание взаимодействия:**

1. **Пользователь** (Telegram) выбирает роль:
   - Начальник → получает агрегированную статистику.
   - Работник → проходит 10 вопросов по шкале 1–10.

2. **Telegram Bot**:
   - Сохраняет ответы пользователя во временное хранилище (`user_data`).
   - Формирует JSON:  
     ```json
     {
       "user_id": 123456789,
       "anket_type": "base",
       "visible": true,
       "answers": {
         "ans": [5, 7, 6, 7, 7, 8, 6, 6, 7, 7],
         "sum": 66
       }
     }

     ```
   - Отправляет результат на Backend API (`POST /surveys`).

3. **Backend API**:
   - Принимает JSON.
   - Делаёт `INSERT` в PostgreSQL (таблица `surveys`).
   - Возможна валидация и логирование.

4. **PostgreSQL**:
   - Хранит историю анкет в формате `JSONB`.
   - Используется для аналитики, генерации статистики и отчетов.

---

## ⚙️ Требования
- Python 3.10+
- PostgreSQL 13+
- pipenv / venv для управления зависимостями
- Зависимости:

---

📈 Статистика

В режиме "Начальник" бот показывает:
- Средний балл по компании.
- Количество сотрудников в «красной» зоне.
- Рекомендации для отделов.

🗺 Будущие улучшения

    Авторизация начальников через backend.
    История анкет для каждого пользователя.
    Веб-панель для просмотра статистики.
    Графическая версия отчётов.
